{"ast":null,"code":"import _slicedToArray from\"C:/Users/924245/React/Final-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{useHistory}from\"react-router-dom\";import StripeCheckout from\"react-stripe-checkout\";import\"react-toastify/dist/ReactToastify.css\";import\"react-square-payment-form/lib/default.css\";import\"./Cart.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Cart(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),cartObject=_useState2[0],setCartObj=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),total=_useState4[0],setTotal=_useState4[1];var history=useHistory();var amount=0;useEffect(function(){axios.get(\"http://localhost:5000/product/getcart/\".concat(localStorage.getItem(\"name\"))).then(function(res){var cartData=res.data.message;setCartObj(cartData);for(var i=0;i<cartData.length;i++){amount=amount+(cartData[i].price-Math.floor(cartData[i].price/10))*cartData[i].quantity;}setTotal(amount);}).catch(function(err){alert(\"something wrong with server connection\");alert(err.message);});},[cartObject,total]);function increment(increment){increment.username=localStorage.getItem(\"name\");axios.post(\"http://localhost:5000/product/increment\",increment).then(function(res){alert(res.data.message);}).catch(function(err){alert(\"something wrong with server connection\");alert(err.message);});}function decrement(decrement){decrement.username=localStorage.getItem(\"name\");axios.post(\"http://localhost:5000/product/decrement\",decrement).then(function(res){alert(res.data.message);}).catch(function(err){alert(\"something wrong with server connection\");alert(err.message);});}function remove(remove){remove.username=localStorage.getItem(\"name\");axios.post(\"http://localhost:5000/product/remove\",remove).then(function(res){alert(res.data.message);history.push(\"/\");}).catch(function(err){alert(\"something wrong with server connection\");alert(err.message);});}function payments(){var orders={};for(var i=0;i<cartObject.length;i++){orders.username=localStorage.getItem(\"name\");cartObject[i].date=Date();orders=cartObject[i];axios.post(\"http://localhost:5000/user/orders\",orders).then(function(res){alert(res.data.message);history.push(\"/\");}).catch(function(err){alert(\"something wrong with server connection\");alert(err.message);});}alert(\"payment is Completed,Please awit for Delivery \");}return/*#__PURE__*/_jsx(\"div\",{className:\"m-3 mt-5\",children:cartObject.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"m-5 text-center cart  \",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-danger\",children:\"Oops Your cart is empty\"}),/*#__PURE__*/_jsx(\"img\",{className:\"cart-img-main\",src:\"https://i.pinimg.com/originals/66/22/ab/6622ab37c6db6ac166dfec760a2f2939.gif\",alt:\"img\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"container-cart\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow  \",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"border border-1\"}),cartObject&&cartObject.map(function(elements){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2 \",children:/*#__PURE__*/_jsx(\"img\",{className:\"cart-img\",src:elements.profilePic,alt:\"img\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-10\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\" \",children:[\"Product Name : \",elements.bookname,\" \"]}),/*#__PURE__*/_jsxs(\"h6\",{className:\"\",children:[\"   Price : \",/*#__PURE__*/_jsx(\"s\",{className:\"text-danger\",children:elements.price}),\"  \"]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Offer Price : \",elements.price-elements.price/10,\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"ms-2 text-success\",children:[\"You save Upto : \",elements.price/10,\" \"]}),\"  \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"h4 \",children:\"Qty :\"}),/*#__PURE__*/_jsx(\"span\",{className:\"h2 btn btn-outline-success plus ms-3\",onClick:function onClick(){return increment(elements);},children:\"+\"}),/*#__PURE__*/_jsx(\"span\",{className:\"h2  ms-3\",children:elements.quantity}),/*#__PURE__*/_jsx(\"span\",{className:\"h2  minus btn btn-outline-warning ms-3\",onClick:function onClick(){return decrement(elements);},children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{className:\"h6 remove btn btn-outline-danger ms-3\",onClick:function onClick(){return remove(elements);},children:\"Remove\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"ms-2 text-info h6\",children:[\"Total :\",(elements.price-Math.floor(elements.price/10))*elements.quantity]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"border border-1\"})]},elements._id);})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow  \",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"mt-3 text-danger\",children:[\"Sub-Total : \",total,\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-5\",children:/*#__PURE__*/_jsx(StripeCheckout,{className:\"mt-3\",stripeKey:\"pk_test_51JCgnCSFkM8mIruoggDepHpHtlQLZmJFz8dRwiFO2qfAAORKhyRkpyYc6Mp0ELKbC4EgWAANsN4Pin4sCb225eSl00DCc0owyZ\",billingAddress:true,shippingAddress:true,amount:total*100,token:function token(){return payments();}})})]})})]})})});}export default Cart;","map":{"version":3,"sources":["C:/Users/924245/React/Final-Project/src/Components/Cart.js"],"names":["axios","useEffect","useState","useHistory","StripeCheckout","Cart","cartObject","setCartObj","total","setTotal","history","amount","get","localStorage","getItem","then","res","cartData","data","message","i","length","price","Math","floor","quantity","catch","err","alert","increment","username","post","decrement","remove","push","payments","orders","date","Date","map","elements","profilePic","bookname","_id"],"mappings":"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","sourcesContent":["\nimport axios from \"axios\";\nimport { useEffect,useState } from \"react\";\nimport {  useHistory } from \"react-router-dom\";\nimport StripeCheckout from \"react-stripe-checkout\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"react-square-payment-form/lib/default.css\";\n\n\nimport \"./Cart.css\";\n\nfunction Cart(){\n\n    let [cartObject,setCartObj]=useState(\"\");\n    let [total,setTotal]=useState(0);\n    const history = useHistory();\n    \n    let amount=0;\n\n    useEffect(()=>{\n        axios.get(`http://localhost:5000/product/getcart/${localStorage.getItem(\"name\")}`)\n            .then(res=>{\n                let cartData=res.data.message;\n                setCartObj(cartData);\n                for(let i=0;i<cartData.length;i++){\n                   \n                    amount=amount +(cartData[i].price-(Math.floor(cartData[i].price/10)))*cartData[i].quantity;\n                }\n                setTotal(amount);\n            })\n            .catch((err)=>{\n                alert(\"something wrong with server connection\");\n                alert(err.message);\n            });\n\n   \n   \n\n    },[cartObject,total]);\n\n    function increment(increment){\n        increment.username=localStorage.getItem(\"name\");\n        axios.post(\"http://localhost:5000/product/increment\",increment)\n            .then(res=>{\n                alert(res.data.message);\n\n            })\n            .catch((err)=>{\n                alert(\"something wrong with server connection\");\n                alert(err.message);\n            });\n\n    }\n\n    function decrement(decrement){\n        decrement.username=localStorage.getItem(\"name\");\n        axios.post(\"http://localhost:5000/product/decrement\",decrement)\n            .then(res=>{\n                alert(res.data.message);\n\n            })\n            .catch((err)=>{\n                alert(\"something wrong with server connection\");\n                alert(err.message);\n            });\n\n    }\n\n    function remove(remove){\n\n        remove.username=localStorage.getItem(\"name\");\n        axios.post(\"http://localhost:5000/product/remove\",remove)\n            .then(res=>{\n                alert(res.data.message);\n                history.push(\"/\");\n            \n\n            })\n            .catch((err)=>{\n                alert(\"something wrong with server connection\");\n                alert(err.message);\n            });\n\n    }\n  \n    function payments(){\n\n        let orders={};\n        \n        for(let i=0;i<cartObject.length;i++){\n            orders.username=localStorage.getItem(\"name\");\n            cartObject[i].date=Date();\n            orders=cartObject[i];\n            \n            axios.post(\"http://localhost:5000/user/orders\",orders)\n                .then(res=>{\n                    alert(res.data.message);\n                    history.push(\"/\");\n                })\n                .catch((err)=>{\n                    alert(\"something wrong with server connection\");\n                    alert(err.message);\n                });\n        }\n      \n        alert(\"payment is Completed,Please awit for Delivery \");\n    }\n\n    \n    \n\n    return(<div className=\"m-3 mt-5\">\n\n        {cartObject.length===0?\n            <div className=\"m-5 text-center cart  \">\n                <h1 className=\"text-danger\">Oops Your cart is empty</h1>\n                <img className=\"cart-img-main\" src=\"https://i.pinimg.com/originals/66/22/ab/6622ab37c6db6ac166dfec760a2f2939.gif\" alt=\"img\"></img>\n            </div>\n            :\n         \n            <div className=\"container-cart\">\n            \n                <div className=\"row \">\n                \n                \n                    <div className=\"col-md-8\">\n                    \n               \n                        <div className=\"card border-0 shadow  \">\n                            <h1>Shopping Cart</h1>\n                            <hr className=\"border border-1\"></hr>\n                   \n\n                            {cartObject && cartObject.map((elements)=>\n                                \n                                <div key={elements._id}>\n                                    <div className=\"row mb-2\">\n                                        <div className=\"col-md-2 \">\n\n                                            <img className=\"cart-img\" src={elements.profilePic} alt=\"img\"></img>\n                              \n                                        </div>\n\n                                        <div className=\"col-md-10\">\n                           \n\n                                            <h2 className=\" \">Product Name : {elements.bookname} </h2>\n                                            <h6 className=\"\">   Price : <s className=\"text-danger\">{elements.price}</s>  </h6>\n                                            <h6>Offer Price : {elements.price-(elements.price)/10} <span className=\"ms-2 text-success\">You save Upto : {(elements.price)/10} </span>  </h6>\n                           \n                                            <div>\n                                                <span className=\"h4 \">Qty :</span>\n                                                <span className=\"h2 btn btn-outline-success plus ms-3\" onClick={()=>increment(elements)}>+</span>\n                                                <span className=\"h2  ms-3\">{elements.quantity}</span>\n                                                <span className=\"h2  minus btn btn-outline-warning ms-3\" onClick={()=>decrement(elements)}>-</span>\n                                                <span className=\"h6 remove btn btn-outline-danger ms-3\" onClick={()=>remove(elements)}>Remove</span>\n                                                <span className=\"ms-2 text-info h6\">Total :{(elements.price-(Math.floor(elements.price/10)))*elements.quantity}</span>\n                                               \n                                            </div>\n                              \n                            \n                            \n                                        </div>\n                          \n\n                                    </div>\n                                    <hr className=\"border border-1\"></hr>\n                                </div>\n                       \n                       \n                            )}\n                \n                        </div>\n\n                    </div>\n                    <div className=\"col-md-4\">\n                        <div className=\"card border-0 shadow  \">\n                   \n                            <h2 className=\"mt-3 text-danger\">Sub-Total : {total} </h2>\n                            <div className=\"text-center mb-5\">\n                                {/* <button className=\"cart-btn \">Proceed to Buy</button> */}\n                                <StripeCheckout className=\"mt-3\"\n                                    stripeKey=\"pk_test_51JCgnCSFkM8mIruoggDepHpHtlQLZmJFz8dRwiFO2qfAAORKhyRkpyYc6Mp0ELKbC4EgWAANsN4Pin4sCb225eSl00DCc0owyZ\"\n                                    billingAddress\n                                    shippingAddress\n                                    amount={total*100}\n                                    token={()=>payments()}\n                                />\n\n\n       \n     \n                            </div>\n                    \n                        </div>\n                    \n                    </div>\n                </div>\n            </div>\n        }\n    </div>);\n\n}\n\n\nexport default Cart;"]},"metadata":{},"sourceType":"module"}